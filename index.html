<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Iobio : " />

    <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/site.css">

    <script>
        var ie = (function(){

            var undef,
                v = 3,
                div = document.createElement('div'),
                all = div.getElementsByTagName('i');

            while (
                div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
                all[0]
            );

            return v > 4 ? v : undef;

        }());
    
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-47481907-1', 'iobio.io');
      ga('send', 'pageview');
    </script>
    <style>
        div.tooltip {   
          position: absolute;           
          text-align: center;           
          z-index:20;
          color:white;
          padding: 4px 6px 4px 6px;             
          font: 11px arial;        
          background: rgb(80,80,80);   
          border: 0px;      
          border-radius: 4px;           
          pointer-events: none;         
        }
    
        .axis path, .axis line {
          fill: none;
          stroke: #000;
          shape-rendering: crispEdges;
        }
    
        .number {
            font-size: 40px;
        }
        
        a {
            color:rgb(110,110,110);
        }
        
        .divider {
            background: #ffffff; /* Old browsers */
            background: -moz-linear-gradient(left,  #ffffff 0%, #2d8fc1 50%, #f9f9f9 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, right top, color-stop(0%,#ffffff), color-stop(50%,#2d8fc1), color-stop(100%,#f9f9f9)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(left,  #ffffff 0%,#2d8fc1 50%,#f9f9f9 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(left,  #ffffff 0%,#2d8fc1 50%,#f9f9f9 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(left,  #ffffff 0%,#2d8fc1 50%,#f9f9f9 100%); /* IE10+ */
            background: linear-gradient(to right,  #ffffff 0%,#2d8fc1 50%,#f9f9f9 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f9f9f9',GradientType=1 ); /* IE6-9 */            
        }
    </style>

    <title>iobio</title>
    <script src="js/jquery.min.js"></script>
    <script src="js/modernizr.custom.15620.js"></script>
    <script src="js/d3.v3.min.js"></script>
    <script src="js/dots.d3.js"></script>
    <script src="js/binary.js"></script>
    
    <script>                
        $(function() {
          $('a[href*=#]:not([href=#])').click(function() {
            if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
              var target = $(this.hash);
              target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
              if (target.length) {
                $('html,body').animate({
                  scrollTop: target.offset().top
                }, 1000);
                return false;
              }
            }
          });
        });
        
        $(document).ready(function() {
            //determine operating system
            // test for OS
            var OSName="Unknown OS";
            if (navigator.appVersion.indexOf("Win")!=-1) OSName="Windows";
            if (navigator.appVersion.indexOf("Mac")!=-1) OSName="MacOS";
            if (navigator.appVersion.indexOf("X11")!=-1) OSName="UNIX";
            if (navigator.appVersion.indexOf("Linux")!=-1) OSName="Linux";
            
            if (OSName != 'MacOS') { $('body').css('-webkit-text-stroke', '1px'); $('text').css('font-family', 'arial');}
            
            // test for bad browsers/features
            if( !Modernizr.websockets ||
                ($.browser.safari && OSName == "Windows"))
                {Alert("iobio relies on cutting edge features that this browser doesn't support. We recommend Chrome version 32 or higher");}
            
            
            // check for range slider
            if (!Modernizr.inputtypes.range) { $('#sliderDiv').css('visibility', 'hidden')}
            
            // test for ie
            if(ie) { alert('Iobio uses cutting edge internet features. Internet Explorer is NOT SUPPORTED. Please use chrome (recommended), firefox, or safari')}
            (function () {
              var lastTime = 0;
              var vendors = ['ms', 'moz', 'webkit', 'o'];
              for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
                window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
                window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];
              }
              if(!window.requestAnimationFrame)
                window.requestAnimationFrame = function (callback, element) {
                  var currTime = new Date().getTime();
                  var timeToCall = Math.max(0, 16 - (currTime - lastTime));
                  var id = window.setTimeout(function () {
                    callback(currTime + timeToCall);
                  },
                  timeToCall);
                  lastTime = currTime + timeToCall;
                  return id;
              };
              if(!window.cancelAnimationFrame)
                window.cancelAnimationFrame = function (id) {
                  clearTimeout(id);
              };
            }());
        })
    
        function tryIt() {    
            document.getElementById("tryit").style.visibility = 'hidden';
            // document.getElementById("chart").style.visibility = "visible"
                               
            var qual = parseInt(document.getElementById("qualValue").innerHTML);
            var url = "ws://vcflib.iobio.io/?format=json&parseByLine=true&cmd=vcffilter%20-f%20%22QUAL%20%3E%20"+qual+"%22%20http%253A%252F%252Ffreebayes.iobio.io%253Fcmd%253D-f%252520.%252Fdata%252Freferences%252Fhs_ref_chr11.fa%252520http%2525253A%2525252F%2525252FbamMerger.iobio.io%2525253Fbinary%2525253Dtrue%25252526cmd%2525253D11%2525253A10108473-10288473%2525252520%27http%2525253A%2525252F%2525252Fs3.amazonaws.com%2525252F1000genomes%2525252Fdata%2525252FNA06984%2525252Falignment%2525252FNA06984.chrom11.ILLUMINA.bwa.CEU.low_coverage.20111114.bam%27%2525252520%27http%2525253A%2525252F%2525252Fs3.amazonaws.com%2525252F1000genomes%2525252Fdata%2525252FNA06985%2525252Falignment%2525252FNA06985.chrom11.ILLUMINA.bwa.CEU.low_coverage.20111114.bam'"
            window.bool = !window.bool;
            var values = [];
            var chart = window.chart;
            var client = BinaryClient(url);
            client.on('open', function(stream){
               var stream = client.createStream({event:'run', params : {'url':url}});
               stream.on('data', function(data, options) {            
                   if (data == undefined) return;
                   var variant = JSON.parse(data).data;
                   if(variant == undefined) return;
                   values.push(variant);
                   window.requestAnimationFrame( function() {
                       chart(values, undefined, "first");
                   })
               });
           });
        }
        
        function updateQual(qual) {
            document.getElementById("qualValue").innerHTML = qual; 
        }
        
    </script>
</head>

<body>
    <a href="http://bioinformatics.bc.edu/marthlab/wiki/index.php/Main_Page" style="float:right" ><img src="images/ribbon.png" style="position:relative;overflow:auto;height:130px;cursor:pointer" ></img></a><div style="clear:both"></div>
    <div id="header">
        <div id="title">iobio</div>
        <div id="menu">
            <ul>
                <li class="active"><a href='index.html'>What is iobio?</a></li>
                <li><a href='#details'>Details</a></li>
                <li><a href='demos.html'>Demos</a></li>
                <!-- <li><a href='how-to-use.html'>How to use it</a></li> -->
            </ul>
        </div>
        <div style="clear:both"/>
    </div>
    <div style="font-size:30px; width:1000px; margin-left: auto; margin-right: auto; margin-top: 40px; color: rgb(110,110,110);text-align:justify">
        <div style="font-size:35px">Real-Time Interactive Genomic Analysis</div>
        <div style="font-size:17px;margin-top:5px;line-height:30px;font-weight:400">Full analysis of genome scale big data takes hours to weeks and is often overkill. 
            IOBIO will enable you to analyze  specific genomic regions, for example a gene, in real time.  
            Use different algorithms and play with parameters to explore your data!</div>
        
        
        <div id="chart" style="margin-top:60px; position:relative">
            <div id="calling" style="color:#2d8fc1;margin-left:auto;margin-right:auto;font-size:20px;text-align:center;font-weight:400;">Real-time variant calling on alignment data on the Amazon cloud ...</div>
            <div id="variants" style="margin-left:auto;margin-right:auto;width:830px; height:160px"></div>
            <div style="position:absolute; left:50%;top:31%">
                <div id="tryit" onclick="tryIt()" style="cursor:pointer; position:relative;z-index:500; left:-50%;background:#2d8fc1;color:white;border-radius:4px;font-size:20px;padding:8px 25px 8px 25px;text-align:center">Go!</div>
            </div>
            <!-- <input onmouseup="tryit()" type="range" id="range" min="0" max="100" step="1" value="20" orient="vertical" style="float:right;margin-right: 125px;margin-top: -110px;" /> -->
            <div id="sliderDiv">
                <input onchange="updateQual(this.value);" onmouseup="tryIt()" type="range" id="range" min="0" max="100" step="1" value="20" orient="vertical" style="float:right;margin-right: 115px;margin-top: -135px;" />
                <div id="minQual" style="float:right;margin-right:38px;margin-top:-112px;font-size:11px;font-weight:400;padding:2px;border-radius:4px">Variant Qual Threshold</div>
                <div id="qualValue" style="text-align:center;color:#2d8fc1;float:right;margin-right:112px;margin-top:-158px;border:2px solid rgb(150,150,150);height:12px;width:17px;font-size:12px;padding:2px;border-radius:4px">20</div>
            </div>
            <div id="hover" style="color:#2d8fc1;margin-left:auto;margin-right:auto;font-size:20px;text-align:center;font-weight:400">(hover for details, slide to recall)</div>
            <div style="text-align:center;font-size:16px;margin-top: 24px; "><a href="demos.html">See More Demos</a></div>
        </div>
        <div class="divider" style="margin-top:40px; height:1px"></div>
        <a name="details"></a>
        <div style="margin-top:70px;margin-bottom:10px">Real-time analysis</div>
        <div style="font-size:16px;font-weight:400">Full analysis of large data-sets typically takes a long time, from minutes to even weeks. 
            However, full analysis is often overkill and dissuades researchers from exploring the data (e.g. with different software, parameters or visually).
            iobio achieves realtime analysis by focusing on small but meaningful amounts of data. 
        </div>
        <div style="margin-top:70px;margin-bottom:10px;text-align:right">Analysis Modalities</div>
        <div style="font-size:16px;font-weight:400">
            <div style="margin-top:5px;float:left;margin-right:3px">Regional Analysis<br/><img src="images/regional_analysis.png" style="height:50px"/><br/>Sampling Analysis<br/><img style="height:50px" src="images/sampling_analysis.png"/></div>
            <div>
               iobio utilizes two different strategies for extracting meaning out of data-sets in real time (1) <b>Regional analyses</b> analyze a single “slice” or region (e.g 100kb) of a possibly very large dataset. 
               This is useful for researchers, especially those without computational expertise, to analyze those portions of vast biomedical datasets that are
               essential for their research (e.g. alignment data from the region of a single gene, rather than a whole chromosome). For a demo see the <a href="http://chmille4.github.io/variantComparer-iobio/">Variant Comparer Demo</a>, which compares two tools and a truth set. 
               (2) <b>Sampling analyses</b> request and analyze many small slices randomly selected from a large data file, and use these slices to estimate 
               relevant characteristics of the larger dataset (e.g. average sequence coverage, or the distribution of fragment sizes in a whole-genome sequencing dataset), in real-time. 
               Sampling works well for many statistical analyses of large datasets, and sampling-based approximation often approaches the precise result very quickly (within seconds). 
               A good example can be seen in <a href="http://bam.iobio.io">http://bam.iobio.io</a>.
            </div>
        </div>
        <div style="margin-top:70px;margin-bottom:10px">Visually Driven Analysis</div>
        <div style="font-size:16px;font-weight:400">
            Often the first pass of an analysis does not provide optimal results, and analysis needs to be repeated, sometimes multiple times. 
            Real-time analysis enables users the ability to complete the analysis quickly, visually examine the results and the quality summaries, 
            and if necessary, interactively reanalyze in real time. The immediate visualization of the results can provoke new questions and 
            further analyses, creating an iterative and exploratory process.
        </div>
        <div class="footer"></div>
    </div>   
    
    <script>
        window.chart = dotsD3("#variants", 1, '#2d8fc1');
        window.chart([]);
        var div = d3.select("body").append("div")   
             .attr("class", "tooltip")               
             .style("opacity", 0);
    </script>     

</body>
</html>
